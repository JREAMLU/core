### Open-Falcon

## 介绍

- Open-Falcon 原本是XiaoMI开源的监控软件, 但XiaoMI对其维护不是特别积极，滴滴作为使用者，对其进行了一次重构，所以衍生出了falcon-plus

## 特性

- 数据采集: 不仅可以有默认对数据采集，还支持用户主动push需要对数据，比如(业务数据，调用延时，次数等0)
- 水平扩展: 各个模块都支持水平扩展(除了alarms)，提高高中采集查询性能
- 报警策略管理: 报警策略生成，支持策略模版，模版的继承和覆盖，多种报警方式，以及callback调用
- graph组件: 支撑200万metric的上报、归档、存储
- 查询组件: rrdtool(时序处理数据的方式)的数据归档策略，秒级返回上百个metric一年的历史数据
- dashboard: 展示页面，自定义展示信息
- 高可用: 整个系统无核心单点，易运维，易部署，可水平扩展

## 主要模块

- Agent: 负责指标采集, 默认会采集系统负载信息，也可以接受手动采集(提供http接口来采集),将采集到的数据转发给Transfer
- Transfer: 主要是数据转发服务,类似与kafka，接受Agent生产的数据,将数据分片后会将数据push给Graph和Judge来展示和判断是否报警
- Graph: 存储绘图数据的组件, 存储接收Transfer数据, 给Query提供绘图数据
- Query: 顾名思义是查询组件, 接受请求去Grpah取数据，汇总后返回给查询方
- Dashboard: 查询界面,查看趋势图,可视化配置
- Portal: 配置报警策略
- Hbs: Heartbeat Server, Agent会做心跳做自发现，不用关心需要采集什么，除了一些默认的采集信息，可以在hbs配置,让Agent自取
- Judge: 接受Transfer, 判断数据是否需要报警, 数据量大可以对其水平扩展, 加速报警判断
- Alarm: Judge符合报警规则，会将事件扔入redis队列, Alarm会从队列中读取并处理这些报警
- Aggregator: 根据配置 聚合某集群下的所有机器的某个指标的值, 做分析使用

## 总结
#### 优势
- 一整套监控体系的布局, 不需要整合各种开源项目来满足
- 各个模块分工明确
- 相对灵活的报警策略
- 对系统和数据库(Linux、Windows、Mysql、Redis、等)有相应的插件

#### 缺点
- 使用者不是很普及，但基本都是大厂
- 有问题社区反应不及时需自行二次开发解决

#### -
- 目前还没具体使用，了解比较宏观, 得具体使用再做分析

#### 社区活跃度
- 目前XiaoMI(star 1900+)社区最近一次提交是四月份, 上一次提交要追溯到从去年11月
- 滴滴社区Falcon-Plus(star 900+)近半年活跃度比较高

#### 相关资料
- https://book.open-falcon.org/zh/intro/index.html
